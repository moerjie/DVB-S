# DVB-S 发送端Matlab仿真及Vivado开发

## DVB标准
Digital Video Broadcasting（数字视频广播）是一个完整的数字电视解决方案，其中包括DVB-C（数字电视有线传输标准），
DVB-T（数字电视地面传输标准），DVB-S（数字电视卫星传输标准），下面主要介绍DVB-S系统。

DVB-S为数字卫星广播标准，卫星传输具有覆盖面广、节目容量大等优点。信号采用RS(188，204)和卷积码的级联编码，调制方式为QPSK。

## DVB-S信道编码及调制的基本原理

### 原理框图
根据ETSI的DVB-S标准，原理框图如下所示

<img src="https://sawen-pic-blog.oss-cn-beijing.aliyuncs.com/utool_pic/1717241147381.png" alt="1717241147381.png" style="zoom:67%;" />

由于卫星提供的DTH服务特别受功率限制的影响，因此主要的设计目的应该为抗噪声和干扰，而不是频谱效率。为了在不过度损害频谱效率的前提下实现很高的能量效率，系统应使用QPSK调制和卷积码和RS码的级联。

### 接口

<img src="https://sawen-pic-blog.oss-cn-beijing.aliyuncs.com/2024after4202406012140085.png" alt="image-20240601214037044" style="zoom:67%;" />

### 信道编码

#### TS流适配单元（adaptation）

输入的TS流根据MPEG-2格式按照固定的长度打包，数据包的长度为188，帧头为同步字 $47_{hex}$。DVB-S标准中要求每8个TS数据包组成一个超帧，将超帧中的8个同步头进行反转，变为$b8_{hex}$，其余的同步头不变。同时还要自动插入空包，在数据包后插入16个0，将长度为188的数据包包补充成长度为204的数据包，与后续的信道编码模块建立时钟匹配和接口连接。



#### 扰码单元（energy dispersal）

基带信号中含有很多连“1”或者连“0”的现象，会导致基带信号的频谱中含有较多的低频成分，既不利于信号在信道的传输，也不利于在接收端提取时钟信号。因此采用扰码，将TS流转化成伪随机序列。DVB-S标准中的随机化的原理图如下：

<img src="https://sawen-pic-blog.oss-cn-beijing.aliyuncs.com/2024after4202406012158761.png" alt="image-20240601215832692" style="zoom:67%;" />

伪随机二进制序列的生成多项式如下：
$$
1+x^{14}+x^{15}
$$
扰码以8个数据包组成的超帧为单位进行处理，在每一个单元开始处理时，将序列”100101010000000“装入寄存器，对其进行扰码处理。数据包的同步字不进行扰码处理。

#### RS编码

外码采用RS编码，其具有同时纠正随机错误和突发错误的能力，并且纠正突发错误更有效。DVB-S采用的编码格式为RS(239,255)截断而得到的RS(188,204)编码，最大可纠错长度为8个字节，编码从同步字$47_{hex}或b8_{hex}$开始。

![image-20240602112419532](https://sawen-pic-blog.oss-cn-beijing.aliyuncs.com/2024after4202406021124574.png)

##### 编码原理简述

假设信息多项式为
$$
m(x)=m_{187}x^{187}+m_{186}x^{186}+\cdots+m_1x^1+m_0
$$
码生成多项式为
$$
g(x)=(x+a^0)(x+a^1)(x+a^2)\cdots(x+a^{14})(x+a^{15})
$$
其中的$a=02_{hex}$，则生成多项式的展开式为
$$
g(x)=x^{16}+59x^{15}+13x^{14}+104x^{13}+189x^{12}+68x^{11}+209x^{10}+30x^{9}+8x^8+163x^7+65x^6+41x^5+229x^4+98x^3+50x^2+36x+59
$$
将$x^{16}\cdot m(x)$除以$g(x)$后，余式为关于x的15次多项式，其16个系数即为生成的16个校验字节，将其添加到188长度的数据包后即可完成RS(188,204)的编码。

#### 卷积交织

在数字信号传输过程中，由于一些突发性干扰，会导致一连串的数据错误，很有可能超出RS码的纠错范围。而卷积交织可以将错误的字符分散开，使得信道变成近似无记忆信道。DVB-S中采用的是交织深度为12的卷积交织。交织和解交织的框图如下：

![image-20240602162127578](https://sawen-pic-blog.oss-cn-beijing.aliyuncs.com/2024after4202406021621696.png)

#### 卷积编码

内码采用的是(2,1,7)型的卷积码，编码效率为$\frac{k}{n}=\frac{1}{2}$，由6个移位寄存器和2个模二加加法器构成，1个bit信号生成2个bit的编码信号，约束长度为7。

![image-20240602162958547](https://sawen-pic-blog.oss-cn-beijing.aliyuncs.com/2024after4202406021629604.png)

当信道质量较好时可以对编码信号进行删余，提高信道利用率。

